(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(3),r=a.n(s),c=(a(16),a(1)),l=a.n(c),h=a(4),o=a(5),u=a(6),d=a(8),p=a(7),f=a(9),m=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).fileRef=n.a.createRef(),e.canvasRef=n.a.createRef(),e.sliderRefs=[n.a.createRef(),n.a.createRef(),n.a.createRef(),n.a.createRef(),n.a.createRef(),n.a.createRef(),n.a.createRef()],e.state={canvasW:0,canvasH:0,currentIndex:0,brightness:100,contrast:100,grayscale:0,hueRotate:0,invert:!1,saturate:100,sepia:0,blur:0,filterText:""},e.bitmaps=[],e.timer=void 0,e.graphicsCtx=void 0,e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"updateFilter",value:function(){var e=this.state,t=e.brightness,a=e.contrast,i=e.grayscale,n=e.hueRotate,s=e.invert,r=e.saturate,c=e.sepia,l=e.blur;this.setState({filterText:"brightness(".concat(t,"%) contrast(").concat(a,"%) grayscale(").concat(i,"%) hue-rotate(").concat(n,"deg) invert(").concat(s?100:0,"%) saturate(").concat(r,"%) sepia(").concat(c,"%) blur(").concat(l,"px)")})}},{key:"render",value:function(){return n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement("label",{for:"fileSelector",style:{background:"gray"}},"\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u2026",n.a.createElement("input",{type:"file",id:"fileSelector",accept:"image/*",multiple:!0,ref:this.fileRef,onChange:this.onChange.bind(this),style:{display:"none"}})),n.a.createElement("button",null,"Play")),n.a.createElement("div",{style:{background:"black",width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}},n.a.createElement("canvas",{ref:this.canvasRef,width:this.state.canvasW,height:this.state.canvasH,style:{width:"".concat(this.state.canvasW,"px"),height:"".concat(this.state.canvasH,"px")}})),n.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"300px"}},"Brightness: ",n.a.createElement("input",{type:"range",value:this.state.brightness,min:"0",max:"400",ref:this.sliderRefs[0],onInput:this.onSliderUpdate.bind(this)}),"Contrast: ",n.a.createElement("input",{type:"range",value:this.state.contrast,min:"0",max:"400",ref:this.sliderRefs[1],onInput:this.onSliderUpdate.bind(this)}),"Grayscale: ",n.a.createElement("input",{type:"range",value:this.state.grayscale,min:"0",max:"100",ref:this.sliderRefs[2],onInput:this.onSliderUpdate.bind(this)}),"HueRotate: ",n.a.createElement("input",{type:"range",value:this.state.hueRotate,min:"0",max:"360",ref:this.sliderRefs[3],onInput:this.onSliderUpdate.bind(this)}),"Invert: ",n.a.createElement("input",{type:"checkbox",checked:this.state.invert,onClick:this.onInvertChange.bind(this)}),"Saturate: ",n.a.createElement("input",{type:"range",value:this.state.saturate,min:"0",max:"400",ref:this.sliderRefs[4],onInput:this.onSliderUpdate.bind(this)}),"Sepia: ",n.a.createElement("input",{type:"range",value:this.state.sepia,min:"0",max:"100",ref:this.sliderRefs[5],onInput:this.onSliderUpdate.bind(this)}),"Blur: ",n.a.createElement("input",{type:"range",value:this.state.blur,min:"0",max:"100",ref:this.sliderRefs[6],onInput:this.onSliderUpdate.bind(this)})))}},{key:"onSliderUpdate",value:function(e){var t=e.target.value;switch(e.target){case this.sliderRefs[0].current:this.setState({brightness:t});break;case this.sliderRefs[1].current:this.setState({contrast:t});break;case this.sliderRefs[2].current:this.setState({grayscale:t});break;case this.sliderRefs[3].current:this.setState({hueRotate:t});break;case this.sliderRefs[4].current:this.setState({saturate:t});break;case this.sliderRefs[5].current:this.setState({sepia:t});break;case this.sliderRefs[6].current:this.setState({blur:t});break;default:return}this.updateFilter()}},{key:"onInvertChange",value:function(e){this.setState({invert:e.target.checked}),this.updateFilter()}},{key:"onChange",value:function(){var e=Object(h.a)(l.a.mark(function e(t){var a,i,n,s,r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.timer&&(window.clearInterval(this.timer),this.timer=void 0),a=t.target.files,i=Array.from(a).map(function(e){return createImageBitmap(e)}),e.next=5,Promise.all(i);case 5:if(this.bitmaps=e.sent,!(this.bitmaps.length<1)){e.next=8;break}return e.abrupt("return");case 8:n=this.canvasRef.current,this.graphicsCtx=n.getContext("2d"),s=this.bitmaps[0],r=s.width,c=s.height,this.setState({canvasW:r,canvasH:c,currentIndex:0}),this.timer=window.setInterval(this.doUpdate.bind(this),1e3/15);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"doUpdate",value:function(){var e=this.bitmaps,t=this.state,a=t.filterText,i=t.currentIndex,n=this.graphicsCtx;n.save(),n.filter=a,n.drawImage(e[i],0,0),n.restore();var s=i+1;this.setState({currentIndex:s<this.bitmaps.length?s:0})}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.1e8f554b.chunk.js.map